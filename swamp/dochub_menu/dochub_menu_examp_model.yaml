entities: # Сущности расширенной метамодели
<<<<<<<< HEAD:swamp/dochub_menu/menu_examp_model.yaml
  # Бизнес-сущности
 menu_examp:               # Секция, где будет описываться объекты сущности "взаимодействие". Обязательно.
    title: Меню DocHub   # Название сущности. Обязательно.
    description: >          # Описание сущности текст или ссылка на документ. Необязательно.
      Структура меню DocHub
========
 dochub_menu_examp:
    title: Меню DocHub
    description: >
      Пример структуры меню DocHub
>>>>>>>> 30ed608af0be8bad232ab82cdd3974f1be8b6c5d:swamp/dochub_menu/dochub_menu_examp_model.yaml
    menu: >
      (
        [{
          "location": "Развитие корп архитектуры/Инструменты/DocHub/Целевая структура меню DocHub",
<<<<<<<< HEAD:swamp/dochub_menu/menu_examp_model.yaml
          "link": "entities/menu_examp/menu_tree"
========
          "link": "entities/dochub_menu_examp/menu_tree"
          "order": 7215
>>>>>>>> 30ed608af0be8bad232ab82cdd3974f1be8b6c5d:swamp/dochub_menu/dochub_menu_examp_model.yaml
        }]
      )

    presentations:
      menu_tree:
        type: plantuml
        template: templates/menu_tree.puml
        source: >
          (
              $set("rpev-id", undefined);
              $arrleft := function($arr ,$count) {
                  $map($arr, function($v, $i) {
                      $i <= $count ? $v
                  })
              };
<<<<<<<< HEAD:swamp/dochub_menu/menu_examp_model.yaml
              $menu_examp := $.menu_examp;
              [$menu_examp.$spread().($merge([{"id" : $keys()[0]}, $.*]))^(order).(
========
              $dochub_menu_examp := $.dochub_menu_examp;
              [$dochub_menu_examp.$spread().($merge([{"id" : $keys()[0]}, $.*]))^(order).(
>>>>>>>> 30ed608af0be8bad232ab82cdd3974f1be8b6c5d:swamp/dochub_menu/dochub_menu_examp_model.yaml
                  $prev_nodes := $split($get("rpev-id"), ".");
                  $prev_level := $count($prev_nodes);
                  $curr_nodes := $split(id, ".");
                  $set("isdiff", false);
                  $result := $map($curr_nodes, function($v, $i) {(
                      $set("isdiff", $get("isdiff") or $prev_level = 0 or $prev_level <= $i or $v != $prev_nodes[$i]) ? (
                          $id := $join($arrleft($curr_nodes, $i), ".");
<<<<<<<< HEAD:swamp/dochub_menu/menu_examp_model.yaml
                          $menu :=  $lookup($menu_examp, $id);
========
                          $menu :=  $lookup($dochub_menu_examp, $id);
>>>>>>>> 30ed608af0be8bad232ab82cdd3974f1be8b6c5d:swamp/dochub_menu/dochub_menu_examp_model.yaml
                          {
                              "id": $id,
                              "level": $pad("", $i + 2, "*"),
                              "title": $menu ? $menu.title : $id
                          }
                      );
                  )});
                  $set("rpev-id", id);
                  $result
              )];
          )

